<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Space Invaders</title>
    <style>
        canvas {
            background: url('background.png');
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <audio id="bgMusic" src="background_music.mp3" loop autoplay></audio>
    <audio id="shootSound" src="shoot.mp3"></audio>
    <audio id="hitSound" src="hit.mp3"></audio>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const playerShips = [
            'ship1.png',
            'ship2.png',
            'ship3.png'
        ];
        let selectedShipIndex = 0; // Change to 1 or 2 for other ships
        const playerImg = new Image();
        playerImg.src = playerShips[selectedShipIndex];

        const enemyImg = new Image();
        enemyImg.src = 'enemy.png';

        const bulletImg = new Image();
        bulletImg.src = 'bullet.png';

        const shootSound = document.getElementById('shootSound');
        const hitSound = document.getElementById('hitSound');

        let player = { x: 368, y: 500, speed: 5 };
        let bullets = [];
        let enemy = { x: Math.random() * 736, y: 50, dx: 2, dy: 40 };

        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowLeft') player.x -= player.speed;
            if (e.key === 'ArrowRight') player.x += player.speed;
            if (e.key === ' ') {
                bullets.push({ x: player.x + 24, y: player.y });
                shootSound.currentTime = 0;
                shootSound.play();
            }
        });

        function drawPlayer() {
            ctx.drawImage(playerImg, player.x, player.y, 64, 64);
        }

        function drawEnemy() {
            ctx.drawImage(enemyImg, enemy.x, enemy.y, 64, 64);
        }

        function drawBullets() {
            bullets.forEach(bullet => {
                ctx.drawImage(bulletImg, bullet.x, bullet.y, 16, 32);
            });
        }

        function update() {
            enemy.x += enemy.dx;
            if (enemy.x <= 0 || enemy.x >= 736) {
                enemy.dx = -enemy.dx;
                enemy.y += enemy.dy;
            }

            bullets.forEach(bullet => bullet.y -= 10);
            bullets = bullets.filter(bullet => bullet.y > 0);

            bullets.forEach((bullet, i) => {
                const dist = Math.hypot(bullet.x - enemy.x, bullet.y - enemy.y);
                if (dist < 30) {
                    hitSound.currentTime = 0;
                    hitSound.play();
                    bullets.splice(i, 1); // Only remove bullet, enemy stays
                }
            });
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPlayer();
            drawEnemy();
            drawBullets();
            update();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>
